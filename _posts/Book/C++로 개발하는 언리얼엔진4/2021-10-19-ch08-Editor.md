---
excerpt: "c++로 개발하는 언리얼엔진4 ch08 요약 및 정리"
categories:  UE4_Scripting_with_C++_Cookbook
tag: [Book, UE4]
---



## Editor 에서 값 변경시 자동 호출되는 함수

### Property Change

{% highlight c++ %}
void AEX_Actor_Object::PostEditChangeProperty(FPropertyChangedEvent& PropertyChangedEvent)
{
	Super::PostEditChangeProperty(PropertyChangedEvent);
	
	if (!!PropertyChangedEvent.Property)
	{
		const FName name(PropertyChangedEvent.Property->GetName());
		if (name == GET_MEMBER_NAME_CHECKED(AEX_Actor_Object, my_array))
		{
			PFCPP::Print(my_array[0]);
		}
	}
}
{% endhighlight %} 

에디터에서 값 변경시 위 함수가 호출됨.

```Super``` 쪽의 호출을 생략시 이 함수만 호출되고 끝나고.

아니면 ```OnConstruction``` 와 BP 라면 ```ConstructScript``` 도 같이 실행됨.

### Transform Change

{% highlight c++ %}
virtual void OnConstruction(const FTransform& Transform) override;
{% endhighlight %}

에디터에서 Transform 을 변경했다면 위 함수가 호출되며, 당연히 AActor 이하부터 가능.

BP 의 ```ConstructScript``` 도 구현했다면 위치 변경 시```OnConstruction``` 과 같이 실행됨.

<br/> <br/>

## 모듈 

### 모듈구축

아래는 책대로 에디터용 모듈을 만드는 목적임.

[참고하면 좋은 블로그](https://kyoun.tistory.com/123)

#### .UProject

```
	"Modules": [
		{
			"Name": "Example",
			"Type": "Runtime",
			"LoadingPhase": "Default",
			"AdditionalDependencies": [
				"Engine"
			]
		},
		{
			"Name": "ExampleEditor",
			"Type": "Editor",
			"LoadingPhase": "PostEngineInit",
			"AdditionalDependencies": [
				"Engine",
				"CoreUObject"
			]
		}
	]
```

json 으로 작성되었으며, "Modules" 객체에 모듈을 위처럼 추가하면 됨.

```Type``` 은 ```Editor```, ```Runtime``` 두개가 가능.
+ ```Runtime``` 모듈과 달리 ```Editor``` 모듈은 핫리로드가 지원이 안됨
+ IDE 에서 빌드 후 에디터 껏다 켜야함.

지금인 에디터에 추가할게 필요하므로 ```LoadingPhase``` 는 ```PostEngineInit``` 이 됨.

#### .Target.cs <br/>

Visual Studio 에서 빌드할 모듈 이름을 여기에 등록함.

버전이 에디터와 게임 두개가 있으니까 편집툴만 할거면 뒤에 에디터 붙은거만 하면 되고, 게임에도 하는거면 에디터에도 해야함.

#### .Build.cs

+ ```PublicDependencyModuleNames``` 과 ```PrivateDependencyModuleNames```
	+ 전자는 모듈의 public header 파일에 의존되고 후자는 모듈의 private code 에 의존하는 파일이라 함.
	+ 이는 모듈의 구성 폴더이름에 ```Public```, ```Private```, ```Classes``` 총 3가지 특별한 이름이 있는 것과 연관됨.
		+ ```Source/[ModuleName]/[Public, Private, Classes]/...``` 이런구조.
		+ ```Private``` 은 내부 모듈용으로 cpp 파일이 주로 들어감
		+ ```Public``` 은 외부 모듈 공개용으로 h 파일이 주로 들어감
		+ ```Classes``` 는 ```Public``` 과 같지만 프로젝트에서 사용될 내용이 주로 들어감.

#### [ModuleName].h/cpp

+ ```IMPLEMENT_GAME_MODULE``` 은 새 모듈 클래스의 인스턴스를 반환하는 C 함수로 ```InitializeComponent``` 를 선언하는데 #define 으로 되어있음
+ 게임 메인 모듈은 ```IMPLEMENT_PRIMARY_GAME_MODULE``` 로 선언되어야하고 최소 하나이상이어야 함.
+ ```FDefaultGameModuleImpl``` 은 최소형태의 모듈 클래스임
+ 에디터에서 쓰려면 접두사 ```F``` 붙여서 직접 클래스로 만들어서 써야함.

### 클래스

런