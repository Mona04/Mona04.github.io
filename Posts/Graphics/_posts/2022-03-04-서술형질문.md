---
excerpt: "복붙용"
use_math: true
---

## 게임 그래픽 프로그래밍

HLSL 이란 무엇인가?
+ OpenGL 의 GLSL 과 유사한  MS 가 DirectX9 이후부터 제공하는 고급 셰이더 언어
+ 복잡한 Shader Assembly 대신 C 스타일로 쉽게 작성할 수 있다. 
+ Direct11 Pipeline 기준 VS, PS 등을 HLSL 로 프로그래밍 할 수 있다.

Constant Buffer 의 역할은?
+ Shader 에서 사용되는 변수들을 CPU 에서 수정해서 사용할 수 있게 해줌.
+ 빠른 CPU 업데이트와 빠른 GPU Access 를 위해서 제한이 다른 Resource 와 달리 추가로 있으며,  4096 vectors 정도의 크기의 한계를 가짐.

SV_Position 의 역할은?
+ SV 는 System Value 의 약자로 프로그래밍 불가능한 Pipeline 에서 사용되는 값임.
+ Pixel Shader 의 Input 값으로 필요하며, Rasterize 전후로 NDC -> 화면공간으로 바뀜.

SV_Target 의 역할은?
+ RenderTarget 에 그려질 값을 알려주는 System Value 임. 
+ 여러개의 RenderTarget 이 있다면 그에 맞게 SV_Target 이 필요함.

DirectX11 의 Rendering Pipeline 순서
+ IA -> VS -> HS -> TS -> DS -> GS (-> SO) -> RS -> PS -> OM -> 

Texture.Sample 에 대해 서술하시오
+ Texture 를 Sampling 하여 float4 값을 가져오는 함수. 
+ 텍스쳐 보간이랑 UV 범위시 처리 등을 설정하는 Sampler 와 uv(w) 를 인자로 받음.

Texture.Load 에 대해 서술하시오.
+ Texture 의 값을 Sampling, Filtering 없이 가져오는 것.
+ 따라서 0~1 사이의 uv 가 아니라 픽셀의 index 를 인자로 가짐.

Skinning 을 위한 Blend Indices 와 Blend Weights 에 대해 서술
+ Animation 을 하기위해서 모델에 관절부위마다 Transform 혹은 Bone 을 넣어둠.
+ 이러한 Bone 과 Vertex 의 관계가 Blend Indices 로, Bone 의 인덱스를 가리켜 자신이 영향을 받을 Bone 을 지정함.
+ 하나의 Bone 에만 영향을 받으면 Vertex 가 꺾이는 현상이 발생하므로, Blend Indices 는 1개 이상이 되고, 각각의 가중치가 Weights 가 됨. Weights 는 일반적으로 합쳐서 1임.

Linear Interpolation 을 쓰시오
+ Linear(a, b, alpha) = (1-alpha)a + alpha*b

Ambient 조명에 대해 서술하시오
+ 간접 조명을 흉내내기 위한 것으로 전체적으로 고르게 비춘다는 가정으로 처리하는 조명.
+ 간단하게는 일괄적으로 일정 값을 주거나, Normal 을 이용해 위아래를 구분하는 정도로 구현함.

Diffuse 조명에 대해 서술하시오.
+ 난반사광을 흉내내기 위한 것으로, 카메라의 위치는 관계없고 빛의 방향과 Normal 에 의해 값이 결정이 됨.
+ Phong Model 에서는 유명한데 ```saturate(dot(Normal, Light)) * light_color * model_color``` 이런 식임

Specular 조명에 대해 서술하시오
+ 정반사광을 흉내내기 위한 것으로, 카메라의 위치, 방향이 필수임.
+ Phong Model 에서는 ``` saturate(dot(reflect, view))^shineness * light_color * model_color ```

Emmisive 조명에 대해 서술하시오
+ 자체로 빛이 나는걸 처리합니다. Blur 등과 함께 있어야 그럴듯한 효과가 납니다.

Normal Mapping 방법
+ Normal Texture 에서 대개 rg 를 xy, b 를 텍스텨면의 수직방향으로 봄.
+ 이러한 노말 텍스쳐의 공간 내에서 각 Pixel 은 Normal 값을 의미하게 됨.
+ 우리가 이것을 쓰려면 이를 World 공간으로 변환해야함.
+ 이때 쓰이는 것이 Unpacking 과 normal, binormal, tangent 로 만든 변환행렬임
+ Unpacking 은 0 ~ 1로 선형으로 정규화된 값을 -1 ~ 1 로 펼치는 것임. 
+ ```
float3x3 TBN = float3x3(normalize(input.binormal), normalize(input.tangent), normalize(input.normal));
out_normal = normalize(mul(out_normal, TBN));  // fbx에 calc tangent 없을걸  
```

NDC -> Screen Space
+ [ms](https://docs.microsoft.com/ko-kr/windows/win32/direct3d11/d3d10-graphics-programming-guide-rasterizer-stage-getting-started?redirectedfrom=MSDN)
+ X = (X + 1) * Viewport.Width * 0.5 + Viewport.TopLeftX
+ Y = (1 - Y) * Viewport.Height * 0.5 + Viewport.TopLeftY
+ Z = Viewport.MinDepth + Z * (Viewport.MaxDepth - Viewport.MinDepth);

Dynamic Cube Mapping
+ GS

Domain Shader 의 역할은
+ Domain 을 여러 정점으로 쪼개 얻은 0~1 사이의 좌표인 SV_DomainLocation 과 Control Point 갯수에 따라 들어오는 정점값인 OutputPatch 를 이용해 실제로 나갈 정점을 조합하는 것. DS 를 어떻게 짜느냐에 따라서 4개의 Control Point 로 반원, 구, 캡슐 등 다양한 모양도 만들수 있음.

NDC 공간은 무엇인가?
+ World 를 Camera 기준 좌표로 변환하면 시야에 들어와야 할 부분은 원점이 끝부분인 Frustrum 모양이 됨. 이를 종횡비와 FOV 등을 고려해 xy 를 -1~1, z 를 0~1 로 변환해 얻는 공간.

최대 RTV (DirectX 11)
+ [Pixel Shader Output Slots](https://docs.microsoft.com/en-us/windows/win32/direct3d11/overviews-direct3d-11-resources-limits)

PCF 그림자를 위해 Depth Stencil State 에서 사용해야하는 필터 옵션은?
+ Depth on?


### Lambert cos 법칙과 Phong 모델의 관계

### Scene Graph 란?

[ㅈㄱㄴ](https://blog.naver.com/PostView.nhn?isHttpsRedirect=true&blogId=lifeisforu&logNo=80025686114&categoryNo=3&viewDate=&currentPage=1&listtype=0)

복셀

Skinning Animation 에 대해 설명
+ 정점이 여러 Bone 에 영향을 받게하여 면이 끊기는 현상을 막고 자연스러운 애니메이션을 만듬

라이트맵에 대해 설명하시오
+ 오브젝트의 그림자 반사면, 면의 밝기 등이 사전에 저장되어 실시간 렌더링을 더욱 빠르게 하는 기술

DirectX 란 무엇인가?
+ MS 에서 멀티미디어 특히 그래픽 하드웨어의 제어를 위해 제공하는 API

Direct Compute 는 GPGPU 의 종류인데 이게 뭐냐
+ 그래픽스를 위해 계산만 했던 GPU를 데이터 계산에도 쓰는 것으로 CPU 로 병렬프로그램을 돌리던 것을 Compute Shader 등으로 처리함

Texture Splatting 에 대해 서술
+ 여러 텍스쳐를 알파맵을 이용해 Blend 하는 것으로 지형에서 많이 쓰임

Culling
+ Frustrum Culling
+ Occlusion Culling
+ Backspace Culling

Geometry Shader 의 사용이유
+ 하나의 Primitive 를 여러개의 Primitive로 증폭시키는 역할로, Cube Map 등을 만드는데 사용됨

Ts 의 역할은
+ 여러 정점의 모음인 Patch 와 삼각형 혹은 사각형 같은 Domain 을 PatchConstant Fuct 를 통해 여러 uv(w)로 나뉜것을 이용해 더 복잡한 많은 정점으로 만드는 것

Instancing 의 사용이유
+ 동일객체를 약간의 변화만 주어 대량으로 그리는 기술
+ Draw call, Cache hit 등의 최적화로 매우 빠르게 그림

Deferred Rendering
+ 광원 당 Object 를 서로 그려야 했던 Forward 오는 달리,
+ 여러 Texture 에 Albedo, Normal, Depth 등을 나누어 그려
+ 이 텍스쳐를 이용해 광원을 처리하는 기술
+ 광원 수 + 물체 수의 Drawcall 로 줄어들게 됨
+ 반투명을 못그리고 안티앨리어스를 복잡하게 해결해야함

깊이버터 그림자로 해상도문제
+ Texture 해상도를 늘리고, 
+ 광원의 범위가 크면 PCF 도입

Rim Lighting 의 사용이유
+ 캐릭터를 배경과 살짝 구분되도록 하기 위해

원과 사각형 충돌
+ [ㅈㄱㄴ](http://dolphin.ivyro.net/file/mathematics/tutorial07.html)

Lambert 광원의 수식
Phong Specular Blinm 수식에 대해 기술

반사벡터의 수식, 미끄러짐 벡터의 수식

힙이란?
+ 완전이진트리의 일종으로 부모노드가 자식노드보다 항상 일정한 관계를 가지게 함
+ 그래서 Root 는 최소/최댓값이 됨. 이를 반정렬 상태라고 하며 우선순위큐를 구현하는데 쓰임.

그래프
+ Node(Vertex) 간의 관계(Edge). 방향성이 있는지, 가중치가 있는지, 순환하는지 등으로 나뉨. 
+ 인장행렬 혹은 인접리스트를 이용해 나타내는데, 전자는 Vertex^2 크기라 잘 안씀

Scene Graph
+ 그룹화를 통해서 여러 부분들을 마치 하나처럼 동작하게 하거나, 필요한 부분을 더 효율적으로 찾게 해주는 자료구조.
+ 보통 Tree 형태로 구현되어, 부모노드가 자식노드를 포괄하는 Volumn 등을 갖게됨.
+ Interaction 이나 Rendering 등에서 가시성, 충돌 테스트 등을 효율적으로 하게해줌.

Dynamic Programming 에 대해
+ 큰 문제는 작은문제로 나뉘고, 작은문제는 서로 의존하는 상황에서 사용되는 문제해결전략.
+ 한번 푼 문제는 저장해서 1번만 계산함

분할정복
+ 큰 문제가 서로 독립적인 작은 문제로 나뉠 때 사용하는 방법

Navigation Mesh 에 대해 서술하시오
+ 메쉬로 이루어진 3D 공간을 단순화하여 길찾기 알고리즘을 적용하기 쉽게 한 것.
+ 보통 삼각형들로 Navi Mesh 를 구성하여 각 삼각형을 Graph 의 Node 로 보고 A* 알고리즘을 적용함.

Realtime Collision
- Capsule, Box, 구 => 서로간의 충돌

perlin noise 는 튀는 값이 없어서 부드러운 값을 원할 때 필요함

A(Ambient), Diffuse, Speculer=>Reflection, Emissive, G + Point, Spot, Capsule, Area

언매니지드c++ 유데미
andriod app 에서 간단한거부터 만들기
포큐아카데미


UE4Cpp 에서 화면 전환시 이전 Camera (Player 에 달린거도) 끄기
